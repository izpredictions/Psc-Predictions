<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Connexion - PCS PRÃ‰DICTIONS</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <h1>ğŸ¯ PCS PRÃ‰DICTIONS</h1>

  <div id="auth">
    <h2>ğŸ“ INSCRIPTION</h2>
    <input id="re" type="email" placeholder="Email">
    <input id="rp" type="password" placeholder="Mot de passe (8 caractÃ¨res min)">
    <input id="rc" type="password" placeholder="Confirmer mot de passe">
    <button onclick="register()">S'inscrire</button>
    <p id="rm" class="msg"></p>

    <hr style="margin: 40px auto; max-width: 350px;">

    <h2>ğŸ”‘ CONNEXION</h2>
    <input id="le" type="email" placeholder="Email">
    <input id="lp" type="password" placeholder="Mot de passe">
    <button onclick="login()">Se connecter</button>
    <p id="lm" class="msg"></p>

    <a class="back-btn" href="index.html">â† Retour</a>
  </div>

  <div id="welcome" style="display:none;">
    <h2 id="wtext"></h2>
    <p id="vipStatus"></p>

    <div class="container">
      <a class="box" href="gratuit.html">ğŸ†“ GRATUIT</a>
      <a class="box" href="vip.html">ğŸ‘‘ VIP</a>
      <a class="box" href="montante.html">ğŸ“ˆ MONTANTE</a>
    </div>

    <div style="margin-top: 30px;">
      <button onclick="logout()">Se dÃ©connecter</button>
    </div>
  </div>

  <script>
    const re = document.getElementById('re');
    const rp = document.getElementById('rp');
    const rc = document.getElementById('rc');
    const rm = document.getElementById('rm');
    const le = document.getElementById('le');
    const lp = document.getElementById('lp');
    const lm = document.getElementById('lm');
    const auth = document.getElementById('auth');
    const welcome = document.getElementById('welcome');
    const wtext = document.getElementById('wtext');
    const vipStatus = document.getElementById('vipStatus');

    function register() {
      rm.className = 'msg';
      if (!re.value.includes('@')) {
        rm.innerText = "Email invalide";
        return;
      }
      if (rp.value.length < 8) {
        rm.innerText = "Mot de passe trop court (8 caractÃ¨res min)";
        return;
      }
      if (rp.value !== rc.value) {
        rm.innerText = "Les mots de passe ne correspondent pas";
        return;
      }
      localStorage.setItem("pcs_user", JSON.stringify({
        email: re.value,
        pass: rp.value,
        vip: false,
        vipExpiry: null
      }));
      rm.className = 'msg success';
      rm.innerText = "âœ… Inscription rÃ©ussie ! Vous pouvez vous connecter.";
      re.value = '';
      rp.value = '';
      rc.value = '';
    }

    function login() {
      lm.className = 'msg';
      const u = JSON.parse(localStorage.getItem("pcs_user"));
      if (!u || le.value !== u.email || lp.value !== u.pass) {
        lm.innerText = "âŒ Identifiants incorrects";
        return;
      }
      localStorage.setItem("pcs_login", "ok");
      show(u.email, u.vip);
    }

    function show(email, isVip) {
      auth.style.display = "none";
      welcome.style.display = "block";
      wtext.innerText = "Bienvenue sur PCS PRÃ‰DICTIONS, " + email + " ğŸ‰";
      if (isVip) {
        vipStatus.innerHTML = '<span class="vip-badge">ğŸ‘‘ MEMBRE VIP</span>';
      } else {
        vipStatus.innerHTML = '<span style="color:#666;">Compte Gratuit</span>';
      }
    }

    function logout() {
      localStorage.removeItem("pcs_login");
      location.reload();
    }

    // Auto-login si dÃ©jÃ  connectÃ©
    if (localStorage.getItem("pcs_login") === "ok") {
      const u = JSON.parse(localStorage.getItem("pcs_user"));
      if (u) show(u.email, u.vip);
    }
  </script>

</body>
</html>
